<h1></h1>
<div class="medium-detail">
  <div class="image-detail">
    <%= image_tag(@cloud_resource_image_url + @medium.filename_hash) %>
  </div>
  <div class="image-description">
    <p>
      <strong>Medientyp:</strong>
      <%= @medium.mediatype %>
    </p>

    <p>
      <strong>Datum:</strong>
      <%= @medium.datetime.strftime("%d.%m.%Y %H:%M:%S") %>
    </p>

    <p>
      <strong>Längengrad:</strong>
      <%= @medium.longitude %>
    </p>

    <p>
      <strong>Breitengrad:</strong>
      <%= @medium.latitude %>
    </p>

    <p>
      <strong>Sequenz:</strong>
      <%= @medium.sequence %>
    </p>

    <p>
      <strong>Frame:</strong>
      <%= @medium.frame %>
    </p>
  </div>
  <div class="image-links">
      <%= link_to 'Tubecam ' + @tubecam_device.serialnumber, tubecam_device_path(@medium.tubecam_device_id), class: 'btn btn-primary' %>
      <%= link_to 'Standort auf Karte anzeigen', maps_path(:longitude => @medium.longitude, :latitude => @medium.latitude), class: 'btn btn-primary' %>
      <% if !@annotations.empty? %>
        <%= link_to 'Annotieren', annotations_new_path, :id => @medium.id, class: 'btn btn-primary' %>
      <% end %>
  </div>
</div>

<% if @annotations.empty? %>
    <h4>Es wurden noch keine Annotationen getätigt.</h4>
    <%= link_to 'Annotieren', annotations_new_path, :id => @medium.id, class: 'btn btn-primary' %>
<% else %>
  <table class="table table-striped table-sm table-responsive table-hover">
    <thead>
    <tr>
      <th>Lookup-Index</th>
      <th>Family</th>
      <th>Art</th>
      <th>Tier</th>
      <th>Datum</th>
      <th colspan="3"></th>
    </tr>
    </thead>

    <tbody>
    <% @annotations.each do |annotation| %>
        <tr>
          <td><%= annotation.annotations_lookup_table_id %></td>
          <td><%= @annotations_lookup_table[annotation.annotations_lookup_table_id].family %></td>
          <td><%= @annotations_lookup_table[annotation.annotations_lookup_table_id].genus %></td>
          <td><%= @annotations_lookup_table[annotation.annotations_lookup_table_id].species %></td>
          <td><%= annotation.created_at %></td>
          <% if current_user.id == annotation.user_id %>
            <td><%= link_to 'Löschen', @medium, method: :delete, data: { confirm: 'Soll die Annotation wirklich unwiederruflich gelöscht werden?' } %></td>
          <% end %>
          <% if current_user.verified_spotter_role? %>
              <% if !annotation.verified_id.nil? %>
                  <td><%= link_to 'Verfizieren' %></td>
              <% else %>
                  <td><%= link_to 'De-verfizieren' %></td>
              <% end %>
          <% end %>
        </tr>
    <% end %>
    </tbody>
  </table>
<% end %>